environment:
  CACHE_DIR: "${EBRO_ROOT}/.cache"

imports:
  apt: { from: "../../modules/apt" }
  networkmanager: { from: "../../modules/networkmanager" }
  sway: { from: "../../modules/sway" }
  waybar: { from: "../../modules/waybar" }
  alacritty: { from: "../../modules/alacritty" }
  mise: { from: "../../modules/mise/debian" }
  docker: { from: "../../modules/docker" }
  sublime: { from: "../../modules/sublime/debian" }
  vscode: { from: "../../modules/vscode/debian" }
  keepassxc: { from: "../../modules/keepassxc/linux" }
  dino: { from: "../../modules/dino" }

tasks:
  default:
    requires:
      - query: tasks | filter(.labels["autorequire"] == "true") | map(.id)

  remove-gnome-keyring:
    labels:
      autorequire: "true"
    script: |
      sudo apt-get remove -y gnome-keyring
    when:
      check_fails: "! command -v gnome-keyring"
